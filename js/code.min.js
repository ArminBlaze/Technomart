"use strict";function ready(){mapWindow.addEventListener("click",function(e){e.preventDefault()}),mapClick.addEventListener("click",function(){mapWindow.classList.add("mapShow"),mapClick.style.zIndex="-1"}),closeMap.addEventListener("click",function(e){e.preventDefault(),mapWindow.classList.contains("mapShow")&&mapWindow.classList.remove("mapShow"),mapClick.style.zIndex="1"}),ymaps.ready(init)}function init(){myMap=new ymaps.Map("map",{center:[59.93895,30.3199],zoom:17,controls:["zoomControl"]});var e="<b>Техномарт</b><br/>Кликни, чтобы увидеть детали.",a="<div style='margin:5px 7px 7px 7px;'><div class='map__title'>Техномарт</div><div class='map__phone'>+7 (812) 555-05-55</div><div class='margin-top:-5px;'><a href='#adress' class='news-item__date'>Перейти на страницу магазина</a></div></div>",o="<div class='map__text'>Большая конюшенная ул., 19</div>",t=[59.938653,30.323085];myPlacemark=new ymaps.Placemark(t,{hintContent:e,balloonContent:a,iconContent:o},{iconLayout:"default#imageWithContent",iconImageHref:"../img/map__bullet.png",iconImageSize:[22,43],iconImageOffset:[-11,-40]}),myMap.geoObjects.add(myPlacemark)}for(var buy=document.querySelectorAll(".card__buy"),modal=document.querySelectorAll(".modal"),popup=document.querySelector(".modal_buy"),close=popup.querySelector(".modal__close"),close2=popup.querySelector(".modal__button_close"),i=0;i<buy.length;i++)buy[i].addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modalShow")});for(var a=0;a<modal.length;a++){var close=modal[a].querySelector(".modal__close");close.addEventListener("click",function(e){e.preventDefault();for(var a=0;a<modal.length;a++)modal[a].classList.contains("modalShow")&&modal[a].classList.remove("modalShow")})}window.addEventListener("keydown",function(e){if(27===e.keyCode){for(var a=0;a<modal.length;a++)modal[a].classList.contains("modalShow")&&modal[a].classList.remove("modalShow");mapWindow.classList.contains("mapShow")&&mapWindow.classList.remove("mapShow"),mapClick.style.zIndex="1"}}),close2.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modalShow")});var about=document.querySelector(".info__contact"),popup2=document.querySelector(".modal_form"),form=popup2.querySelector("form"),userName=popup2.querySelector("[name=name]"),email=popup2.querySelector("[name=email]"),text=popup2.querySelector("[name=text]"),storage=localStorage.getItem("userName"),storage2=localStorage.getItem("email");about.addEventListener("click",function(e){e.preventDefault(),popup2.classList.contains("modalError")&&popup2.classList.remove("modalError"),popup2.classList.add("modalShow"),storage&&(userName.value=storage,email.focus()),storage2?(email.value=storage2,text.focus()):userName.focus(),form.addEventListener("submit",function(e){userName.value&&email.value&&text.value?(localStorage.setItem("userName",userName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),console.log("Введите имя, почту и текст письма"),popup2.classList.add("modalError"))})});var mapWindow=document.querySelector(".info__map"),mapClick=document.querySelector(".map__click"),map=document.querySelector(".map__hover"),closeMap=map.querySelector(".modal__close");document.addEventListener("DOMContentLoaded",ready);var myMap,myPlacemark;
